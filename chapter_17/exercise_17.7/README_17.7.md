# Упражнение по программированию 17.7  
Ниже представлена часть программы, которая читает клавиатурный ввод в вектор  
объектов `string`, сохраняет строковое содержимое (не объекты!) в файле, а  
затем копирует содержимое файла обратно в вектор объектов `string`:  
```cpp
   int main() {
      using namespace std;
      vector<string> vostr;
      string temp;

      // Получить строки
      cout << "Enter strings (empty line to quit:\n)";   // Запрос на ввод строк
      while (getline(cin, temp) && temp[0] != '\0')
         vostr.push_back(temp);
      cout << "Here is your input.\n"; // Вывод введённых строк
      for_each(vostr.begin(), vostr.end(), ShowStr);

      // Сохранить в файле
      ofstream fout("strings.dat", ios_base::out | ios_base::binary);
      for_each(vostr.begin(), vostr.end(), Store(fout));
      fout.close();

      // Восстановить содержимое файла
      vector<string> vistr;
      ifstream fin("strings.dat", ios_base::in | ios_base::binary);
      if (!fin.is_open()) {
         cerr << "Could not open file for input.\n";
         exit(EXIT_FAILURE);
      }
      GetStrs(fin, vistr);
      cout << "\nHere are the strings read from the file:\n";
      for_each(vistr.begin(), vistr.end(), ShowStr);
   }
```  
Обратите внимание, что файл открывается в бинарном формате и требуется, чтобы  
ввод-вывод осуществлялся методами `read()` и `write()`. Остаётся сделать  
немного, как перечислено ниже.  
- Написать функцию `void ShowStr(const string&)`, которая отображает объект  
  `string` с последующим символом перевода строки.
- Написать функтор `Store`, который записывает строковую информацию в файл.  
  Конструктор `Store` должен указывать объект `ifstream`, а перегруженная  
  функция `operator()(const string&)` должна указывать строку, подлежащую  
  записи. Приемлемый подход состоит в записи в файл сначала размера строки, а  
  затем - её содержимого. Например, если `len` содержит размер строки, можно  
  было бы использовать следующие операторы:  
  ```cpp
   os.write((char*)& len, sizeof(std::size_t)); // сохранить длину
   os.write(s.data(), len);   // Сохранить символы
  ```
  Член `data()` возвращает указатель на массив, который содержит символы  
  строки. Он подобен члену `c_str()`, за исключением того, что последний  
  добавляет нулевой символ.  
- Написать функцию `GetStrs()`, которая восстанавливает информацию из файла.  
  Она может использовать `read()` для получения размера строки и затем  
  применять цикл для чтения указанного количества символов из файла,  
  добавляя из в изначальную временную строку. Поскольку данные объекта  
  `string` - закрытые, для извлечения данных в строку должен использоваться  
  метод класса вместо считывания их напрямую в неё.  
  